<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Avaris Menu</title>
<style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background: transparent; display:flex; justify-content:center; align-items:center; min-height:100vh; overflow:hidden; }
    .menu-container { width:320px; background:rgba(20,20,20,0.95); border:1px solid rgba(255,255,255,0.1); box-shadow:0 0 40px rgba(0,0,0,0.8); position:relative; display:flex; flex-direction:column; }
    .header { background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 80"><rect fill="%23b22234" width="320" height="80"/><rect fill="%23fff" y="12" width="320" height="8"/><rect fill="%23fff" y="28" width="320" height="8"/><rect fill="%23fff" y="44" width="320" height="8"/><rect fill="%23fff" y="60" width="320" height="8"/><rect fill="%233c3b6e" width="130" height="44"/></svg>'); background-size:cover; background-position:center; padding:20px; text-align:center; border-bottom:2px solid rgba(200,0,0,0.5); }
    .logo-text { font-size:42px; font-weight:bold; color:#fff; text-shadow:3px 3px 0 rgba(200,0,0,0.8), -1px -1px 0 rgba(0,0,0,0.5), 0 0 20px rgba(255,0,0,0.6); letter-spacing:3px; transform:skewY(-2deg); }
    .menu-title { background:rgba(40,40,40,0.9); padding:10px 15px; color:#fff; font-size:13px; font-weight:600; border-bottom:1px solid rgba(255,255,255,0.05); }
    .menu-items { list-style:none; max-height:420px; overflow:hidden; position:relative; background:rgba(30,30,30,0.95); }
    .scroll-indicator { position:absolute; left:0; width:3px; background:linear-gradient(180deg, rgba(200,0,0,0.8) 0%, rgba(150,0,0,0.8) 100%); transition:all 0.2s ease; box-shadow:0 0 8px rgba(200,0,0,0.6); }
    .menu-item { padding:11px 15px; color:#bbb; font-size:14px; border-bottom:1px solid rgba(255,255,255,0.03); cursor:pointer; transition:all 0.3s; display:flex; justify-content:space-between; align-items:center; background:rgba(40,40,40,0.5); }
    .menu-item.selected { background:linear-gradient(90deg, rgba(100,100,100,0.6) 0%, rgba(70,70,70,0.6) 100%); color:#fff; border-left:3px solid #888; }
    .menu-item.has-submenu::after { content:'‚Ä∫'; color:#888; font-size:20px; font-weight:bold; }
    .menu-item.search::after { content:'üîç'; font-size:14px; filter:grayscale(100%); }
    .toggle-switch { width:36px; height:18px; background:rgba(100,100,100,0.5); border-radius:12px; position:relative; cursor:pointer; border:1px solid rgba(255,255,255,0.1); transition:all 0.3s ease; }
    .toggle-switch.active { background:linear-gradient(90deg,#ff4444 0%,#cc0000 100%); box-shadow:0 0 10px rgba(255,0,0,0.5); }
    .toggle-switch::after { content:''; position:absolute; width:14px; height:14px; background:#fff; border-radius:50%; top:1px; left:2px; transition:all 0.3s ease; box-shadow:0 2px 4px rgba(0,0,0,0.3); }
    .toggle-switch.active::after { left:18px; }
    .slider-container { display:flex; align-items:center; gap:10px; flex:1; }
    .slider { flex:1; height:4px; background:rgba(100,100,100,0.5); border-radius:2px; position:relative; cursor:pointer; }
    .slider-fill { height:100%; background:linear-gradient(90deg,#666 0%,#999 100%); border-radius:2px; transition:width 0.2s ease; }
    .slider-value { color:#aaa; font-size:12px; min-width:50px; text-align:right; }
    .submenu-item { padding-left:15px; font-size:13px; }
    .back-button { background:rgba(60,60,60,0.8); border:none; color:#fff; padding:11px 15px; cursor:pointer; font-size:13px; width:100%; text-align:left; border-bottom:1px solid rgba(255,255,255,0.05); }
    .back-button.selected { background:linear-gradient(90deg, rgba(100,100,100,0.6) 0%, rgba(70,70,70,0.6) 100%); border-left:3px solid #888; }
    .footer { padding:8px 15px; background:rgba(20,20,20,0.95); color:#888; font-size:11px; display:flex; align-items:center; gap:8px; border-top:1px solid rgba(255,255,255,0.05); }
    .footer-icon { width:16px; height:16px; background:rgba(200,0,0,0.3); border-radius:3px; display:flex; align-items:center; justify-content:center; font-size:10px; color:#ff6666; }
    .footer-text { color:#999; }
    /* Notifications */
    .notification { position:absolute; top:10px; left:50%; transform:translateX(-50%); background:rgba(50,50,50,0.95); color:#fff; padding:8px 15px; border-radius:6px; box-shadow:0 0 12px rgba(0,0,0,0.5); opacity:0; transition:all 0.4s; pointer-events:none; z-index:1000; }
    .notification.show { opacity:1; }
    /* Input Box */
    .input-overlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; justify-content:center; align-items:center; flex-direction:column; z-index:900; display:none; }
    .input-overlay.active { display:flex; }
    .input-box { background:rgba(40,40,40,0.95); padding:12px 15px; border-radius:6px; color:#fff; font-size:14px; width:80%; text-align:center; }
</style>
</head>
<body>
<div class="menu-container">
    <div class="header"><div class="logo-text">AVARIS</div></div>
    <div class="menu-title" id="menuTitle">Main menu</div>
    <ul class="menu-items" id="menuContent">
        <div class="scroll-indicator" id="scrollIndicator"></div>
        <li class="menu-item has-submenu selected" data-index="0">Player</li>
        <li class="menu-item has-submenu" data-index="1">Server</li>
        <li class="menu-item has-submenu" data-index="2">Weapon</li>
        <li class="menu-item has-submenu" data-index="3">Vehicle</li>
        <li class="menu-item has-submenu" data-index="4">Miscellaneous</li>
        <li class="menu-item has-submenu" data-index="5">Settings</li>
        <li class="menu-item search" data-index="6">Search</li>
    </ul>
    <div class="footer"><div class="footer-icon">‚ö†</div><span class="footer-text">680023 | 6d ago</span></div>
</div>

<!-- Notifications -->
<div class="notification" id="notification"></div>

<!-- Input Overlay -->
<div class="input-overlay" id="inputOverlay">
    <div class="input-box" id="inputBox" contenteditable="true"></div>
</div>

<script>
const submenus = {
    player: { title:'Player', items:[{name:'NoClip',type:'toggle'},{name:'Noclip speed',type:'slider',min:0,max:100,value:50},{name:'Change Menu Key',type:'keybind'}] },
    server: { title:'Server', items:[{name:'Show Player Names',type:'toggle'},{name:'Show Player IDs',type:'toggle'},{name:'Display Ping',type:'toggle'},{name:'Show Coordinates',type:'toggle'}] },
    weapon: { title:'Weapon', items:[{name:'Infinite Ammo',type:'toggle'},{name:'No Reload',type:'toggle'},{name:'Rapid Fire',type:'toggle'},{name:'No Recoil',type:'toggle'},{name:'One Shot Kill',type:'toggle'}] },
    vehicle: { title:'Vehicle', items:[{name:'Boost Speed',type:'toggle'},{name:'Rainbow Paint',type:'toggle'},{name:'Repair Vehicle',type:'toggle'},{name:'Flip Vehicle',type:'toggle'}] },
    miscellaneous: { title:'Miscellaneous', items:[{name:'Nuke Server',type:'button'}] },
    settings: { title:'Settings', items:[{name:'Menu Keybind',type:'keybind'},{name:'Animations Speed',type:'slider',min:0,max:100,value:95}] }
};

let currentMenu='main', currentIndex=0, itemStates={}, inputActive=false, keybindListening=false, keybindTarget=null;

const menuContent=document.getElementById('menuContent');
const menuTitle=document.getElementById('menuTitle');
const scrollIndicator=document.getElementById('scrollIndicator');
const notification=document.getElementById('notification');
const inputOverlay=document.getElementById('inputOverlay');
const inputBox=document.getElementById('inputBox');

function renderMainMenu(){
    currentMenu='main'; currentIndex=0;
    menuTitle.textContent='Main menu';
    menuContent.innerHTML=`
        <div class="scroll-indicator" id="scrollIndicator"></div>
        <li class="menu-item has-submenu selected" data-index="0">Player</li>
        <li class="menu-item has-submenu" data-index="1">Server</li>
        <li class="menu-item has-submenu" data-index="2">Weapon</li>
        <li class="menu-item has-submenu" data-index="3">Vehicle</li>
        <li class="menu-item has-submenu" data-index="4">Miscellaneous</li>
        <li class="menu-item has-submenu" data-index="5">Settings</li>
        <li class="menu-item search" data-index="6">Search</li>
    `;
    updateScrollIndicator();
}

function renderSubmenu(menuName){
    const submenu=submenus[menuName]; if(!submenu) return;
    currentMenu=menuName; currentIndex=0;
    menuTitle.textContent=submenu.title;
    let html='<div class="scroll-indicator" id="scrollIndicator"></div>';
    html+='<button class="back-button selected" data-index="0">‚Üê Back</button>';
    submenu.items.forEach((item,index)=>{
        const itemId=`${menuName}_${index}`; const itemIndex=index+1;
        if(item.type==='toggle'){
            const isActive=itemStates[itemId]||false;
            html+=`<li class="menu-item submenu-item" data-index="${itemIndex}" data-id="${itemId}"><span>${item.name}</span><div class="toggle-switch ${isActive?'active':''}" id="${itemId}"></div></li>`;
        }else if(item.type==='slider'){
            const value=itemStates[itemId]!==undefined?itemStates[itemId]:item.value;
            const percent=((value-item.min)/(item.max-item.min))*100;
            html+=`<li class="menu-item submenu-item" data-index="${itemIndex}" data-id="${itemId}"><span>${item.name}</span><div class="slider-container"><div class="slider"><div class="slider-fill" style="width:${percent}%"></div></div><span class="slider-value">${value}</span></div></li>`;
        }else if(item.type==='keybind'){
            const value=itemStates[itemId]!==undefined?itemStates[itemId]:'None';
            html+=`<li class="menu-item submenu-item" data-index="${itemIndex}" data-id="${itemId}"><span>${item.name}</span><span class="slider-value">${value}</span></li>`;
        }else if(item.type==='button'){
            html+=`<li class="menu-item submenu-item" data-index="${itemIndex}" data-id="${itemId}"><span>${item.name}</span></li>`;
        }
    });
    menuContent.innerHTML=html; updateScrollIndicator();
}

function updateSelection(){
    const items=document.querySelectorAll('[data-index]');
    items.forEach(item=>{parseInt(item.dataset.index)===currentIndex?item.classList.add('selected'):item.classList.remove('selected');});
    updateScrollIndicator();
}

function updateScrollIndicator(){
    const items=document.querySelectorAll('[data-index]'); if(!scrollIndicator||items.length===0)return;
    const totalItems=items.length; const menuHeight=menuContent.offsetHeight;
    scrollIndicator.style.height=(menuHeight/totalItems)+'px';
    scrollIndicator.style.top=(currentIndex*(menuHeight/totalItems))+'px';
}

function showNotification(text,type='info'){
    notification.textContent=text; notification.classList.add('show');
    setTimeout(()=>{notification.classList.remove('show');},3000);
}

function openInput(placeholder='',callback=null){
    inputActive=true; inputOverlay.classList.add('active');
    inputBox.textContent=''; inputBox.focus(); inputBox.setAttribute('data-callback',callback?callback:'');
    inputBox.setAttribute('data-placeholder',placeholder); inputBox.setAttribute('placeholder',placeholder);
}

function closeInput(result=null){
    inputActive=false; inputOverlay.classList.remove('active');
    if(result!==null){
        const callback=inputBox.getAttribute('data-callback');
        if(callback==='search'){ sendToFiveM('inputResult',{value:result}); }
    }
}

function handleEnter(){
    if(inputActive){ closeInput(inputBox.textContent); return; }
    if(currentMenu==='main'){ const menuNames=['player','server','weapon','vehicle','miscellaneous','settings','search']; if(currentIndex<menuNames.length){ renderSubmenu(menuNames[currentIndex]); } }
    else{
        if(currentIndex===0){ renderMainMenu(); return; }
        const items=document.querySelectorAll('[data-index]');
        const selectedItem=Array.from(items).find(item=>parseInt(item.dataset.index)===currentIndex);
        if(selectedItem&&selectedItem.dataset.id){
            const itemId=selectedItem.dataset.id;
            const toggle=selectedItem.querySelector('.toggle-switch');
            if(toggle){ itemStates[itemId]=!itemStates[itemId]; toggle.classList.toggle('active'); sendToFiveM('toggleChanged',{id:itemId,state:itemStates[itemId]}); }
            else{
                const menuName=currentMenu; const itemIndex=currentIndex-1; const item=submenus[menuName].items[itemIndex];
                if(item.type==='keybind'){ keybindListening=true; keybindTarget=itemId; showNotification('Press any key to assign'); }
                else if(item.type==='button'){ sendToFiveM('buttonPressed',{id:itemId}); showNotification(item.name+' pressed'); }
            }
        }
    }
}

function handleBack(){ if(inputActive){ closeInput(); return; } if(currentMenu!=='main'){ renderMainMenu(); updateSelection(); } }

function handleLeftRight(isRight){
    if(currentMenu==='main'||currentIndex===0)return;
    const items=document.querySelectorAll('[data-index]');
    const selectedItem=Array.from(items).find(item=>parseInt(item.dataset.index)===currentIndex);
    if(!selectedItem||!selectedItem.dataset.id)return;
    const itemId=selectedItem.dataset.id;
    const menuName=currentMenu; const itemIndex=currentIndex-1; const item=submenus[menuName].items[itemIndex];
    if(item.type==='slider'){
        let currentValue=itemStates[itemId]!==undefined?itemStates[itemId]:item.value;
        currentValue=isRight?Math.min(item.max,currentValue+1):Math.max(item.min,currentValue-1);
        itemStates[itemId]=currentValue; selectedItem.querySelector('.slider-fill').style.width=((currentValue-item.min)/(item.max-item.min)*100)+'%'; selectedItem.querySelector('.slider-value').textContent=currentValue;
        sendToFiveM('sliderChanged',{id:itemId,value:currentValue});
    }
}

function sendToFiveM(event,data){ if(window.invokeNative){ fetch(`https://${GetParentResourceName()}/${event}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});}else{console.log('FiveM Event:',event,data);}}

// Keyboard navigation
window.addEventListener('keydown',e=>{
    if(keybindListening){ keybindListening=false; itemStates[keybindTarget]=e.keyCode; const items=document.querySelectorAll('[data-index]'); Array.from(items).forEach(i=>{if(i.dataset.id===keybindTarget){i.querySelector('.slider-value').textContent=e.keyCode;}}); showNotification('Key assigned'); sendToFiveM('keybindSelected',{id:keybindTarget,key=e.keyCode}); return; }
    if(inputActive)return;
    switch(e.key){
        case'ArrowUp':currentIndex=Math.max(0,currentIndex-1);updateSelection();break;
        case'ArrowDown':currentIndex=Math.min(document.querySelectorAll('[data-index]').length-1,currentIndex+1);updateSelection();break;
        case'ArrowLeft':handleLeftRight(false);break;
        case'ArrowRight':handleLeftRight(true);break;
        case'Enter':handleEnter();break;
        case'Backspace':handleBack();break;
    }
});

renderMainMenu();
</script>
</body>
</html>
